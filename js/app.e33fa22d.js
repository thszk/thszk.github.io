(function(e){function t(t){for(var i,o,c=t[0],n=t[1],l=t[2],h=0,u=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);d&&d(t);while(u.length)u.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,c=1;c<a.length;c++){var n=a[c];0!==r[n]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},r={app:0},s=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vdtec/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],n=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=n;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},3958:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Navbar"),a("v-content",{staticClass:"mx-4 mb-4"},[a("router-view")],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("v-app-bar",{staticClass:"green",attrs:{app:""}},[a("v-app-bar-nav-icon",{staticClass:"white--text",on:{click:e.draw}}),a("v-toolbar-title",{staticClass:"text-uppercase white--text"},[a("span",{staticClass:"font-weight-light"},[e._v("Regulagem ")]),a("span",[e._v("VD-TEC")])]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",{staticClass:"white--text",on:{click:e.showInfo}},[e._v("info")])],1)],1),a("v-navigation-drawer",{staticClass:"green",attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{shaped:""}},e._l(e.links,(function(t){return a("v-list-item",{key:t.text,attrs:{router:"",to:t.route}},[a("v-list-item-avatar",[a("v-icon",{staticClass:"white--text"},[e._v(e._s(t.icon))])],1),a("v-list-item-title",{staticClass:"white--text"},[e._v(e._s(t.text))])],1)})),1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-col",{attrs:{align:"center"}},[a("v-card-text",[a("p",[e._v("\n            Criado por: "+e._s(this.$store.state.sobre.criador)+" "),a("br"),e._v("\n            Contato: "+e._s(this.$store.state.sobre.contato)+" "),a("br"),a("a",{attrs:{href:this.$store.state.sobre.github,target:"blank"}},[e._v("GitHub")])])]),a("v-btn",{staticClass:"green white--text",attrs:{rounded:""},on:{click:e.hideInfo}},[e._v("OK")])],1)],1)],1)],1)},c=[],n={data:()=>({drawer:!1,dialog:!1,links:[{icon:"home",text:"Home",route:"/"},{icon:"build",text:"Regular",route:"/regular"},{icon:"bluetooth",text:"Conectar",route:"/conectar"}]}),methods:{draw(){this.drawer=!this.drawer},showInfo(){this.dialog=!0},hideInfo(){this.dialog=!1}}},l=n,d=a("2877"),h=a("6544"),u=a.n(h),v=a("40dc"),g=a("5bc1"),p=a("8336"),f=a("b0af"),b=a("99d9"),m=a("62ad"),C=a("169a"),x=a("132d"),w=a("8860"),_=a("da13"),V=a("8270"),y=a("5d23"),k=a("f774"),T=a("2fa4"),D=a("2a7f"),R=Object(d["a"])(l,o,c,!1,null,null,null),$=R.exports;u()(R,{VAppBar:v["a"],VAppBarNavIcon:g["a"],VBtn:p["a"],VCard:f["a"],VCardText:b["b"],VCol:m["a"],VDialog:C["a"],VIcon:x["a"],VList:w["a"],VListItem:_["a"],VListItemAvatar:V["a"],VListItemTitle:y["a"],VNavigationDrawer:k["a"],VSpacer:T["a"],VToolbarTitle:D["a"]});var O={name:"App",components:{Navbar:$},data:()=>({})},P=O,A=a("7496"),E=a("a75b"),j=Object(d["a"])(P,r,s,!1,null,null,null),B=j.exports;u()(j,{VApp:A["a"],VContent:E["a"]});var N=a("8c4f"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"conectar mt-4"},[a("div",{staticClass:"subheading grey--text"},[a("h1",[e._v("\n      >\n      "),a("v-icon",[e._v("bluetooth")])],1)]),a("v-container",{staticClass:"my-2"},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs4:"",md6:""}},[a("v-card",{staticClass:"mb-6",attrs:{height:"250"}},e._l(e.logs,(function(t){return a("v-card-text",{key:t},[e._v("\n            "+e._s(t)+"\n          ")])})),1),a("v-text-field",{attrs:{type:"number",label:"Dado para enviar"},model:{value:e.chat,callback:function(t){e.chat=t},expression:"chat"}},[a("v-btn",{attrs:{slot:"append",disabled:!e.deviceCache,rounded:"",text:""},on:{click:e.send},slot:"append"},[a("v-icon",[e._v("send")])],1)],1),a("v-btn",{staticClass:"green my-2 white--text",attrs:{disabled:e.deviceCache,rounded:"",large:"",block:""},on:{click:e.connect}},[a("v-spacer"),a("v-icon",[e._v("bluetooth_connected")]),e._v(" Conectar"),a("v-spacer")],1),a("v-btn",{staticClass:"green my-2 white--text",attrs:{disabled:!e.deviceCache,rounded:"",large:"",block:""},on:{click:e.disconnect}},[a("v-spacer"),a("v-icon",[e._v("bluetooth_disabled")]),e._v(" Desconectar"),a("v-spacer")],1),a("v-btn",{staticClass:"green my-2 white--text",attrs:{disabled:!e.deviceCache,rounded:"",large:"",block:""},on:{click:e.abrirDialog}},[e._v("Enviar Peso Regulagem")])],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"green white--text"},[e._v("Confirme os Dados")]),a("v-col",{attrs:{align:"center"}},[a("v-card-text",[e.edit?e._e():a("p",[e._v("\n            Peso Regulagem: "+e._s(this.$store.state.pesoRegulagem)+" [Kg/120s]\n          ")]),e.edit?a("v-text-field",{attrs:{type:"number",label:"Novo Peso Regulagem"},model:{value:e.pesoRegulagem,callback:function(t){e.pesoRegulagem=t},expression:"pesoRegulagem"}}):e._e()],1),a("v-card-actions",{attrs:{align:"center"}},[a("v-spacer"),e.edit?e._e():a("v-btn",{staticClass:"blue-grey lighten-1 white--text",attrs:{rounded:""},on:{click:e.editarPesoRegulagem}},[e._v("Alterar")]),e.edit?a("v-btn",{staticClass:"error white--text",attrs:{rounded:""},on:{click:e.cancelar}},[e._v("Cancelar")]):e._e(),a("v-spacer"),a("v-btn",{staticClass:"green white--text",attrs:{rounded:"",disabled:this.$store.state.pesoRegulagem<=0&&!e.pesoRegulagem},on:{click:e.salvarPesoRegulagem}},[e._v("Enviar")]),a("v-spacer")],1)],1)],1)],1)],1)},I=[],L={data:()=>({dialog:!1,logs:["Conectar Com VD-TEC"],edit:!1,chat:"",pesoRegulagem:"",deviceCache:null,characteristicCache:null,readBuffer:""}),methods:{abrirDialog(){this.dialog=!0},fecharDialog(){this.dialog=!1},editarPesoRegulagem(){this.edit=!0},salvarPesoRegulagem(){this.log(`antigo: ${this.$store.state.pesoRegulagem}, novo: ${this.pesoRegulagem}`),this.text=this.text+"\n...Enviando ao dispositivo PR("+this.pesoRegulagem+")",this.log(this.text),this.$store.state.pesoRegulagem=this.pesoRegulagem,this.fecharDialog()},cancelar(){this.edit=!1,this.fecharDialog()},connect(){return(this.deviceCache?Promise.resolve(this.deviceCache):this.requestBluetoothDevice()).then(e=>this.connectDeviceAndCacheCharacteristic(e)).then(e=>this.startNotifications(e)).catch(e=>this.log(e))},requestBluetoothDevice(){return this.log("Requesting bluetooth device..."),navigator.bluetooth.requestDevice({filters:[{services:[65504]}]}).then(e=>{return this.log('"'+e.name+'" bluetooth device selected'),this.deviceCache=e,this.deviceCache.addEventListener("gattserverdisconnected",this.handleDisconnection),this.deviceCache})},handleDisconnection(e){let t=e.target;this.log('"'+t.name+'" bluetooth device disconnected, trying to reconnect...'),this.connectDeviceAndCacheCharacteristic(t).then(e=>this.startNotifications(e)).catch(e=>this.log(e))},connectDeviceAndCacheCharacteristic(e){return e.gatt.connected&&this.characteristicCache?Promise.resolve(this.characteristicCache):(this.log("Connecting to GATT server..."),e.gatt.connect().then(e=>{return this.log("GATT server connected, getting service..."),e.getPrimaryService(65504)}).then(e=>{return this.log("Service found, getting characteristic..."),e.getCharacteristic(65505)}).then(e=>{return this.log("Characteristic found"),this.characteristicCache=e,this.characteristicCache}))},startNotifications(e){return this.log("Starting notifications..."),e.startNotifications().then(()=>{this.log("Notifications started"),e.addEventListener("characteristicvaluechanged",this.handleCharacteristicValueChanged)})},log(e,t){"in"==t?this.logs.unshift(`IN: ${e}`):"out"==t?this.logs.unshift(`OUT: ${e}`):this.logs.unshift(e)},disconnect(){this.deviceCache&&(this.log('Disconnecting from "'+this.deviceCache.name+'" bluetooth device...'),this.deviceCache.removeEventListener("gattserverdisconnected",this.handleDisconnection),this.deviceCache.gatt.connected?(this.deviceCache.gatt.disconnect(),this.log('"'+this.deviceCache.name+'" bluetooth device disconnected')):this.log('"'+this.deviceCache.name+'" bluetooth device is already disconnected')),this.characteristicCache&&(this.characteristicCache.removeEventListener("characteristicvaluechanged",this.handleCharacteristicValueChanged),this.characteristicCache=null),this.deviceCache=null},handleCharacteristicValueChanged(e){let t=(new TextDecoder).decode(e.target.value);for(let a of t)if("\n"===a){let e=this.readBuffer.trim();this.readBuffer="",e&&this.log(t,"in")}else this.readBuffer+=a},send(){console.log(this.chat);let e=String(this.chat);if(e&&this.characteristicCache){if(e+="\n",e.length>20){let t=e.match(/(.|[\r\n]){1,20}/g);this.writeToCharacteristic(this.characteristicCache,t[0]);for(let e=1;e<t.length;e++)setTimeout(()=>{this.writeToCharacteristic(this.characteristicCache,t[e])},100*e)}else this.writeToCharacteristic(this.characteristicCache,e);this.log(e,"out"),this.chat=""}},writeToCharacteristic(e,t){e.writeValue((new TextEncoder).encode(t))}}},q=L,F=(a("6c88"),a("a523")),K=a("0e8f"),M=a("a722"),z=a("8654"),G=Object(d["a"])(q,S,I,!1,null,null,null),H=G.exports;u()(G,{VBtn:p["a"],VCard:f["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:m["a"],VContainer:F["a"],VDialog:C["a"],VFlex:K["a"],VIcon:x["a"],VLayout:M["a"],VSpacer:T["a"],VTextField:z["a"]});var J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"regular mt-6"},[a("div",{staticClass:"subheading grey--text"},[a("h1",[e._v("\n      >\n      "),a("v-icon",[e._v("build")])],1)]),a("v-container",{staticClass:"my-10"},[a("p",{staticClass:"mb-6 subtitle-1"},[e._v("Entre com os dados:")]),a("v-text-field",{attrs:{label:"Velocidade de Trabalho [Km/h]",type:"number",required:""},model:{value:e.velocidade,callback:function(t){e.velocidade=t},expression:"velocidade"}}),a("v-text-field",{attrs:{label:"Largura de Trabalho [m]",type:"number",required:""},model:{value:e.largura,callback:function(t){e.largura=t},expression:"largura"}}),a("v-text-field",{attrs:{label:"Taxa de Aplicação [Kg/ha]",type:"number",required:""},model:{value:e.taxa,callback:function(t){e.taxa=t},expression:"taxa"}}),a("v-btn",{staticClass:"mr-4 mt-10 green white--text",attrs:{rounded:""},on:{click:e.calcular}},[e._v("Calcular")]),a("v-btn",{staticClass:"mt-10 blue-grey lighten-1 white--text",attrs:{rounded:""},on:{click:e.limpar}},[e._v("Limpar")])],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-col",{attrs:{align:"center"}},[a("v-card-text",[a("p",[e._v("Peso para ajuste em 120 segundos:")]),a("p",{staticClass:"font-weight-bold title"},[e._v(e._s(this.result)+" Kg")])]),a("v-card-actions",{attrs:{align:"center"}},[a("v-spacer"),a("v-btn",{staticClass:"error white--text",attrs:{rounded:""},on:{click:e.fecharDialog}},[e._v("Cancelar")]),a("v-spacer"),a("v-btn",{staticClass:"green white--text",attrs:{rounded:"",disabled:e.result<=0},on:{click:e.conectar}},[e._v("Enviar")]),a("v-spacer")],1)],1)],1)],1)],1)},U=[],Q={data:()=>({velocidade:"",largura:"",taxa:"",result:"",dialog:!1,rules:{velocidade:[e=>!!e||"Campo obrigatório",e=>/\d+(\.\d+)?/.test(e)||"Valor inválido"]}}),methods:{limpar(){this.velocidade="",this.largura="",this.taxa=""},calcular(){this.result=Number(this.taxa*this.largura*1.12/(100/(this.velocidade/3.6))).toFixed(4),this.abrirDialog()},abrirDialog(){this.dialog=!0},fecharDialog(){this.dialog=!1},conectar(){this.$store.state.pesoRegulagem=this.result,this.$router.push("/conectar")}}},W=Q,X=Object(d["a"])(W,J,U,!1,null,null,null),Y=X.exports;u()(X,{VBtn:p["a"],VCard:f["a"],VCardActions:b["a"],VCardText:b["b"],VCol:m["a"],VContainer:F["a"],VDialog:C["a"],VIcon:x["a"],VSpacer:T["a"],VTextField:z["a"]});var Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("v-container",{staticClass:"my-10 pa-10"},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs4:"",md6:""}},[a("v-btn",{staticClass:"green my-2 white--text",attrs:{rounded:"",large:"",block:""},on:{click:e.regular}},[e._v("Regular")]),a("v-btn",{staticClass:"green my-2 white--text",attrs:{rounded:"",large:"",block:""},on:{click:e.conectar}},[e._v("Conectar")])],1)],1)],1)],1)},ee=[],te={data:()=>({}),methods:{conectar(){this.$router.push("/conectar")},regular(){this.$router.push("/regular")}}},ae=te,ie=Object(d["a"])(ae,Z,ee,!1,null,null,null),re=ie.exports;u()(ie,{VBtn:p["a"],VContainer:F["a"],VFlex:K["a"],VLayout:M["a"]}),i["a"].use(N["a"]);var se=new N["a"]({mode:"history",base:"/vdtec/",routes:[{path:"/index.html",component:re},{path:"/",name:"Home",component:re},{path:"/conectar",name:"Conectar",component:H},{path:"/regular",name:"Regular",component:Y}]}),oe=a("2f62");i["a"].use(oe["a"]);var ce=new oe["a"].Store({state:{sobre:{criador:"Thiago Suzuqui",contato:"thsuzuqui@gmail.com",github:"https://github.com/thszk"},pesoRegulagem:0},mutations:{},actions:{}}),ne=a("9483");Object(ne["a"])("/vdtec/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var le=a("f309");i["a"].use(le["a"]);var de=new le["a"]({icons:{iconfont:"mdi",theme:{primary:"#6BB6A",success:"#3cd1c2",info:"#78909c",error:"#f83e70",warn:"#ffd54f"}}});i["a"].config.productionTip=!1,new i["a"]({router:se,store:ce,vuetify:de,render:e=>e(B)}).$mount("#app")},"6c88":function(e,t,a){"use strict";var i=a("3958"),r=a.n(i);r.a}});
//# sourceMappingURL=app.e33fa22d.js.map